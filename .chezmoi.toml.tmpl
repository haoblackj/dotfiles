{{- /* WSL判定 */ -}}
{{- $isWSL := contains "microsoft" (.chezmoi.kernel.osrelease | lower) -}}

{{- $location := "work" -}}

{{- if $isWSL -}}
    {{- /* WSLのときはここを通る。必要なら wsl 用の値を設定 */ -}}
    {{- $location = "wsl" -}}
{{- else -}}
    {{- /* WSLでない場合のみドメイン判定を実行 */ -}}
    {{- $domain := env "USERDOMAIN" -}}
    {{- if eq $domain "HIRO" -}}
        {{- $location = "home" -}}
    {{- end -}}
{{- end -}}

[data]
    location = {{ $location | quote }}
    isWSL = {{ $isWSL }}

[edit]
    command = "code"
    args = ["--wait"]

[merge]
    command = "code"
    args = ["--wait", "--diff", "{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Source {{ "}}" }}"]